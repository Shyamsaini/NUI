<div class="pc-container">
    <div class="pcoded-content pb" style="padding-bottom:90px;">
        <div class="page-header">
            <div class="page-block">
                <div class="row align-items-center">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <div class="page-header-title">
                                <h5 class="m-b-10">FIR Report</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="mt-5">
            <div class="card">
                <div class="card-body">
                    <form [formGroup]="form">
                        <div id="searchByFilingNumber" class="row searchbypanel">
                            <div class="col-md-12">
                                <div class="row">
                                    <div class="col-md-10">
                                        <div class="row">
                                            <div class="col-md-2  col-12 mb-3">
                                                <label class="form-label"> District Name</label>
                                                <ng-multiselect-dropdown #multiSelect [settings]="settings"
                                                    [data]="ListDistict" formControlName="districtCodes"
                                                    [placeholder]="'Select District'"
                                                    (onDropDownClose)="onDistrictDropdownChange($event)">
                                                </ng-multiselect-dropdown>
                                            </div>
                                            <div class="col-md-2  col-12 mb-3">
                                                <label class="form-label">Police Station</label>
                                                <ng-multiselect-dropdown #multiSelect [settings]="settings"
                                                    [data]="policestations" formControlName="PS_CD"
                                                    [placeholder]="'Police Station'">
                                                </ng-multiselect-dropdown>
                                            </div>
                                            <div class="col-lg-2 col-md-3  col-12 mb-3">
                                                <label class="form-label">FIR From Date</label>
                                                <sup class="text-danger top-0">*</sup>
                                                <p-calendar class="form-control mon" formControlName="FromDate"
                                                    [minDate]="minDateValue" [maxDate]="maxDateValue"
                                                    [readonlyInput]="true" placeholder="01-07-2024" [showIcon]="true"
                                                    (onSelect)="onDateChange($event)" dateFormat="dd-mm-yy">
                                                </p-calendar>
                                            </div>

                                            <div class="col-lg-2 col-md-3 col-12 mb-3">
                                                <label class="form-label">FIR To Date</label>
                                                <sup class="text-danger top-0">*</sup>
                                                <p-calendar class="form-control mon" formControlName="ToDate"
                                                    [minDate]="minToDate" [maxDate]="maxToDate" [readonlyInput]="true"
                                                    [placeholder]="currentDatePlaceholder" dateFormat="dd-mm-yy"
                                                    [showIcon]="true">
                                                </p-calendar>
                                            </div>
                                            <div class="col-md-2 col-12">
                                                <label class="form-label">Act Type</label>
                                                <select class="form-control" formControlName="ACT_CD">
                                                    <option value="" disabled selected>Select</option>
                                                    <option *ngFor="let option of actTypeOptions"
                                                        [value]="option.value">
                                                        {{ option.label }}
                                                    </option>
                                                </select>
                                            </div>
                                            <div class="col-md-2 col-12">
                                                <label class="form-label">Major Head</label>
                                                <sup class="text-danger top-0">*</sup>
                                                <ng-multiselect-dropdown #multiSelect [settings]="settings"
                                                    [data]="ListMajorHeads" formControlName="Major_Head_Code"
                                                    [placeholder]="'Select Major Head'" tabindex="2">
                                                </ng-multiselect-dropdown>
                                            </div>

                                        </div>

                                    </div>

                                    <div class="col-md-2 col-12 pt-4 mt-2 text-end">
                                        <button type="button" class="btn btn-success text-white mr-2"
                                            (click)="onSearch()">Search</button>
                                        <button type="button" class="btn btn-secondary text-white"
                                            (click)="onReset()">Reset</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>



            <div class="row new-design-fir">
                <div class="col-sm-12" *ngIf="isActiveDiv">
                    <div class="row">
                        <div class="col-md-8 mt-3">
                            <h5 _ngcontent-ng-c2247344463="" class="me-3 mb-0">Time Period From :
                                {{fromDate}} to {{ toDate }}</h5>

                        </div>
                        <div class="col-md-4" *ngIf="isActiveDiv">
                            <div class="d-flex justify-content-end mb-2 pt-2">
                                <button type="button" class="btn btn-success text-white mr-2"
                                    (click)="downloadPDF()">Download
                                    PDF</button>
                                <button type="button" class="btn btn-success text-white mr-2"
                                    (click)="downloadExcel()">Download
                                    Excel</button>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <div class="row d-flex justify-content-center">
                                <table class="table table-bordered text-center table-sm custom-fir-table ">
                                    <thead>
                                        <tr>
                                            <th rowspan="2">Police Station</th>
                                            <th rowspan="2">FIR's REGISTERED (A)</th>
                                            <th rowspan="2">CHARGE SHEETS (CS) FILED (B)</th>
                                            <th rowspan="2">CHARGE SHEETS % OF TOTAL FIR's (B/A)Ã—100</th>
                                            <th rowspan="2">UNTRACED (C)</th>
                                            <th rowspan="2">CANCELLATION / QUASHED (D)</th>
                                            <th rowspan="2">DISPOSAL %<br>(B+C+D)/A *100</th>
                                            <th colspan="3">CASES IN WHICH PUNISHMENT IS LESS THAN 10 YEARS</th>
                                            <th colspan="3">CASES IN WHICH PUNISHMENT IS MORE THAN 10 YEARS</th>
                                        </tr>
                                        <tr class="sec-tr">
                                            <th class="smm-wd">TOTAL FIR's</th>
                                            <th class="lrg-wd">CHARGE SHEETS WITHIN 60 DAYS FROM DATE OF REGISTRATION
                                            </th>
                                            <th class="smm-wd">%AGE</th>
                                            <th>TOTAL FIR's</th>
                                            <th>CHARGE SHEETS WITHIN 90 DAYS FROM DATE OF REGISTRATION</th>
                                            <th>%AGE</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let report of ListFIRReport; let i = index">
                                            <td style="text-align: left;">{{ report.Police_Station }}</td>
                                            <td style="text-align: right;">{{ report.FIR_COUNT }}</td>
                                            <td>{{ report.CHARGESHEET_COUNT }}</td>
                                            <td>{{ report.Chargesheet_Percentage | number:'1.2-2'}} %</td>
                                            <td>{{ report.UNTRACE_COUNT }}</td>
                                            <td>{{ report.CANCELLATION_COUNT }}</td>
                                            <td>{{ report.Combined_Percentage | number:'1.2-2'}} %</td>
                                            <td>{{ report.FIR_Less_Than_12000 }}</td>
                                            <td>{{ report.Chargesheet_Within_60_Days_LT_12000 }}</td>
                                            <td>{{ report.Percentage_LT_12000_Within_60_Days | number:'1.2-2'}} %</td>
                                            <td>{{ report.FIR_Greater_Equal_12000 }}</td>
                                            <td>{{ report.Chargesheet_Within_90_Days_GE_12000 }}</td>
                                            <td>{{ report.Percentage_GE_12000_Within_90_Days | number:'1.2-2' }} %</td>
                                        </tr>
                                        <tr *ngIf="ListFIRReport.length === 0">
                                            <td colspan="13" class="text-center">No record found</td>
                                        </tr>
                                    </tbody>

                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>